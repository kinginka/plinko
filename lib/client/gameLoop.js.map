{"version":3,"sources":["../../src/client/gameLoop.js"],"names":["GameLoop","engine","renderer","stage","timeStarted","Date","now","nextTimestep","loop","setInterval","Engine","update","TIMESTEP","render","clearInterval"],"mappings":";;;;;;;;AAAA;;AACA;;;;IAEqBA,Q;AACnB,0BAAyC;AAAA,QAA3BC,MAA2B,QAA3BA,MAA2B;AAAA,QAAnBC,QAAmB,QAAnBA,QAAmB;AAAA,QAATC,KAAS,QAATA,KAAS;;AAAA;;AACvC,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,KAAL,GAAaA,KAAb;AACD;;;;4BAEO;AAAA;;AACN,WAAKC,WAAL,GAAmBC,KAAKC,GAAL,EAAnB;AACA,WAAKC,YAAL,GAAoBF,KAAKC,GAAL,EAApB;;AAEA,WAAKE,IAAL,GAAYC,YAAY,YAAM;AAC5B,eAAOJ,KAAKC,GAAL,KAAa,MAAKC,YAAzB,EAAuC;AACrCG,2BAAOC,MAAP,CAAc,MAAKV,MAAnB,EAA2BW,cAA3B;AACA,gBAAKL,YAAL,IAAqBK,cAArB;AACD;;AAED,cAAKV,QAAL,CAAcW,MAAd,CAAqB,MAAKV,KAA1B;AACD,OAPW,EAOT,CAPS,CAAZ;AAQD;;;2BAEM;AACLW,oBAAc,KAAKN,IAAnB;AACD;;;;;;kBAvBkBR,Q","file":"gameLoop.js","sourcesContent":["import { TIMESTEP } from '../shared/constants/game';\nimport { Engine } from 'matter-js';\n\nexport default class GameLoop {\n  constructor({ engine, renderer, stage }) {\n    this.engine = engine;\n    this.renderer = renderer;\n    this.stage = stage;\n  }\n\n  start() {\n    this.timeStarted = Date.now();\n    this.nextTimestep = Date.now();\n\n    this.loop = setInterval(() => {\n      while (Date.now() > this.nextTimestep) {\n        Engine.update(this.engine, TIMESTEP);\n        this.nextTimestep += TIMESTEP;\n      }\n\n      this.renderer.render(this.stage);\n    }, 0)\n  }\n\n  stop() {\n    clearInterval(this.loop);\n  }\n}\n"]}